## 📆 2025-11-08

### 🔔 스크럼

- 8주차 과제 정리하여 제출
- 커뮤니티 개인 프로젝트 기능 구현
  - 게시글 목록에 무한 스크롤 적용
  - 게시글 상세 댓글 페이징 적용

### 🚀 Today I Learned

#### 무한 스크롤 구현 방식

| 방식                  | 동작원리                                                                                  | 장점                                                             | 단점                                                                            |
| --------------------- | ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| Scroll Event          | window.addEventListener('scroll')로<br>현재 스크롤 위치가 끝에 가까워질 때마다 fetch 호출 | 구현이 단순 <br> 어디서든 작동                                   | 이벤트 과도 호출로 성능 부담 (디바운스 필요)<br>모바일 브라우저에서 오작동 가능 |
| Intersection Observer | 목록 끝에 “감시용 div”(sentinel)를 두고,<br> 그게 뷰포트에 들어올 때 자동으로 fetch 호출  | 성능 우수 (비동기 옵저버)<br>스크롤 계산 불필요<br>반응형에 강함 | IE 지원 안됨<br>약간의 초기 세팅 필요                                           |

#### 게시물 목록 - Scroll Event 선택

- 내 커뮤니티는 MPA 구조라, 각 페이지 이동 시마다 새로 렌더링되는 형태이다.
- Intersection Observer는 SPA(React/Vue 등)에서 좋지만, MPA 구조에서는 페이지 리로드마다 옵저버 재등록이 필요해 관리가 번거롭다.
- 반면 Scroll Event를 이용한 방식은 간단하고 즉시 적용 가능하며, scrollTop + clientHeight >= scrollHeight 조건으로 하단 감지를 쉽게 구현할 수 있었다.
- 따라서 이번 과제에서는 구조 단순성과 유지보수성을 고려해 Scroll Event 방식으로 무한스크롤을 구현했다.

#### 게시물 상세의 댓글 목록 - 더보기 버튼형 페이징 선택

- 게시글 목록처럼 대량 데이터를 연속적으로 스크롤할 필요는 없다고 느꼈다.
- 따라서 무한스크롤보다는 사용자가 의도적으로 추가 로드를 제어할 수 있는 UX가 더 적합하다고 생각하여 버튼형 페이지를 선택했다.
- 또한, 댓글은 구조적으로 "수정/삭제” 등 동적 인터랙션이 많아서 무한스크롤보다는 구간별 로드가 안정적일거라고 생각했다.
- Spring Pageable의 last 필드로 간단하게 마지막 페이지를 판별했다.

### 🔥 오늘의 도전 과제와 해결 방법

- 게시물 상세에서 댓글 수정 완료 후 액션 : 원래는 댓글 전체를 로드해오는데, 그럼 "더보기"버튼 누르고 수정하면 다시 버튼을 눌러야 수정한 댓글을 볼 수 있어서 기존 댓글의 DOM을 찾아서 내용만 바꿔주는 형태로 수정했다.

### 🗨️ 오늘의 회고

- 사용자의 입장에서 어떤 페이징방식을 선택하는게 나을지 고민하여 선택하는 과정은 늘 어려운 것 같다.
- 현재는 게시물과 댓글 로드 시마다 DB를 직접 조회하는 구조지만, 대규모 트래픽 상황에서는 반복 조회로 DB 부하가 증가할 수 있다는 생각이 들었다. 추후에는 Redis 기반의 조회 캐시 등 효율적으로 로드해오는 바업을 학습하여 도입해보고 싶다.
